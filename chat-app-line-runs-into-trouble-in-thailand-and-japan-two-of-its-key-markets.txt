Japan-based messaging app kicked off its move into chat bots today, beating Facebook to the punch in the process, but it has been a challenging week for the company, which is rumored to be pursuing an IPO in two of its most important markets.Firstly, in its home country, Line is under investigation from authorities for the way that it handles virtual currencies with itsgames. Reuters reportedthat Japanese regulators visited the companys offices to look into whether it flouted rules forhandling customer money.Game tokens are hugely popular in Japan, which is the worlds most lucrative mobile gaming market, and regulations require companies to park half of its customers unused deposits with the Legal Affairs Bureau if they exceed $90,000 in total. Investigators are looking into Line gameKey to the Treasure Box, with Line telling Reuters it didnt deposit the unspent credits because they are not currency  they are Line points.Over in Thailand, meanwhile, Line is under investigation for allowing stickers that mock the countrys royal family to be available. Thailands lese majeste law forbids insults of the monarchy, and is punishable with up to 15 years in prison. Thailands junta government, which assumed control of the country via a military coup in 2014, has used the law in recent times to prosecute a man who defamed the kings dogandpeople who have made comments on Facebook, among other cases.The stickers were made available to Thai users via its community, which allows anyone to create and sell stickers to Lines 215 million active users. Line typically vets the content before it goes on sale, soits unclear why that didnt happen in this case given the legal ramifications of this particular sticker set.Thedeputy chief of ThailandsTechnology Crime Suppression Division told Reuters the police is investigating where the stickers came from and who did this. Line issued an apology in the following statement received by TechCrunch.Line Corporationis aware of the culturally sensitive sticker set that may have caused discomfort among our users in Thailand. The sticker set in question has been pulled from the LineSticker Shop.As we take our users concerns seriously and consider cultural aspects of each country, we will continue to improve our LINE Creators Market.We regret any inconvenience this may have caused and appreciate your understanding.Thailand is an important market for Line. The messaging app is thought to have more than 30 million users in the country, making ita similar size to Facebook. Thailand, together with Japan, Taiwan and Indonesia, represents one-third of the companys active userbase.Line has used to Thailandis test a number of new services in recent times, but it has also run into controversy in the country. Thai police previously requested access to user data, while politicians have previously claimedwas granted. Line repeatedlydenied providing such information. Last year it introduced an end-to-end encryption system for messageswhich, it claimed, made parts of its user data inaccessible to even Line itself. (Lines encryption isnt as robust as WhatsApps recently announced security measures which fully encrypt all user data.)